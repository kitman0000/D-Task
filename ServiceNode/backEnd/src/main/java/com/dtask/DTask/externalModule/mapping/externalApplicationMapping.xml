<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dtask.DTask.externalModule.dao.ExternalApplicationDao">

    <!-- Get the available application by name and password -->
    <select id="getAvailableApplication" resultType="com.dtask.DTask.externalModule.bo.ApplicationBo">
        SELECT * FROM tb_application
        <where>
            name = #{name}
            AND password = #{password}
            AND available = TRUE
        </where>
    </select>

    <!-- Get the url for application -->
    <select id="getApplicationUrl" resultType="com.dtask.DTask.externalModule.bo.ExternalUrlBo">
        SELECT tb_external_url.id as urlID,url,method,`describe`,tb_application_url.applicationID as applicationID
        FROM tb_application_url,tb_external_url
        <where>
            tb_application_url.urlID = tb_external_url.id
            AND applicationID = #{applicationID}
        </where>
    </select>
</mapper>
